---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "grid_deployment Resource - terraform-provider-grid"
subcategory: ""
description: |-
  Resource for deploying multiple workloads like vms (ZMachines), ZDBs, disks, Qsfss, and/or zlogs. A user should specify node id for this deployment, the (already) deployed network that this deployment should be a part of, and the desired workloads configurations.
---

# grid_deployment (Resource)

Resource for deploying multiple workloads like vms (ZMachines), ZDBs, disks, Qsfss, and/or zlogs. A user should specify node id for this deployment, the (already) deployed network that this deployment should be a part of, and the desired workloads configurations.



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `node` (Number) Node id to place the deployment on.

### Optional

- `disks` (Block List) List of disk workloads configurations. (see [below for nested schema](#nestedblock--disks))
- `name` (String) Solution name for created contract to be consistent across threefold tooling. Must contain only lowercase alphanumeric.
- `network_name` (String) Network name of the deployed network resource to connect vms.
- `qsfs` (Block List) List of Qsfs workloads configurations. Qsfs is a quantum storage file system.
You can read more about it [here](https://github.com/threefoldtech/quantum-storage). (see [below for nested schema](#nestedblock--qsfs))
- `solution_provider` (Number) Solution provider ID for the deployed solution which allows the creator of the solution to gain a percentage of the rewards.
- `solution_type` (String) Solution type for created contract to be consistent across threefold tooling.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `vms` (Block List) List of vm (ZMachine) workloads configurations. (see [below for nested schema](#nestedblock--vms))
- `zdbs` (Block List) List of ZDB workloads configurations. You can read more about 0-db (ZDB) [here](https://github.com/threefoldtech/0-db/). (see [below for nested schema](#nestedblock--zdbs))

### Read-Only

- `id` (String) The ID of this resource.
- `ip_range` (String) IP range of the node for the wireguard network (e.g. 10.1.2.0/24). Has to have a subnet mask of 24.

<a id="nestedblock--disks"></a>
### Nested Schema for `disks`

Required:

- `name` (String) Disk workload name. This has to be unique within the deployment. Must contain only lowercase alphanumeric.
- `size` (Number) Disk size in GBs. Must be between 1GB and 10240GBs (10TBs)

Optional:

- `description` (String) Description of disk workload.


<a id="nestedblock--qsfs"></a>
### Nested Schema for `qsfs`

Required:

- `cache` (Number) The size of the fuse mountpoint on the node in MBs (holds qsfs local data before pushing).
- `encryption_key` (String) 64 long hex encoded encryption key (e.g. 0000000000000000000000000000000000000000000000000000000000000000).
- `expected_shards` (Number) The amount of shards which are generated when the data is encoded. Essentially, this is the amount of shards which is needed to be able to recover the data, and some disposable shards which could be lost. The amount of disposable shards can be calculated as expected_shards - minimal_shards.
- `groups` (Block List, Min: 1) The backend groups to write the data to. (see [below for nested schema](#nestedblock--qsfs--groups))
- `max_zdb_data_dir_size` (Number) Maximum size of the data dir in MiB, if this is set and the sum of the file sizes in the data dir gets higher than this value, the least used, already encoded file will be removed.
- `metadata` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--qsfs--metadata))
- `minimal_shards` (Number) The minimum amount of shards which are needed to recover the original data.
- `name` (String) Qsfs workload name. This has to be unique within the deployment. Must contain only lowercase alphanumeric.
- `redundant_groups` (Number) The amount of groups which one should be able to loose while still being able to recover the original data.
- `redundant_nodes` (Number) The amount of nodes that can be lost in every group while still being able to recover the original data.

Optional:

- `compression_algorithm` (String) configuration to use for the compression stage. Currently only snappy is supported.
- `description` (String) Description of the qsfs workload.
- `encryption_algorithm` (String) configuration to use for the encryption stage. Currently only AES is supported.

Read-Only:

- `metrics_endpoint` (String) QSFS exposed metrics endpoint.

<a id="nestedblock--qsfs--groups"></a>
### Nested Schema for `qsfs.groups`

Optional:

- `backends` (Block List) List of ZDB backends configurations. (see [below for nested schema](#nestedblock--qsfs--groups--backends))

<a id="nestedblock--qsfs--groups--backends"></a>
### Nested Schema for `qsfs.groups.backends`

Required:

- `address` (String) Address of backend ZDB (e.g. [300:a582:c60c:df75:f6da:8a92:d5ed:71ad]:9900 or 60.60.60.60:9900).
- `namespace` (String) ZDB namespace.
- `password` (String) Namespace password.



<a id="nestedblock--qsfs--metadata"></a>
### Nested Schema for `qsfs.metadata`

Required:

- `encryption_key` (String) 64 long hex encoded encryption key (e.g. 0000000000000000000000000000000000000000000000000000000000000000).
- `prefix` (String) Data stored on the remote metadata is prefixed with.

Optional:

- `backends` (Block List) List of ZDB backends configurations. (see [below for nested schema](#nestedblock--qsfs--metadata--backends))
- `encryption_algorithm` (String) configuration to use for the encryption stage. Currently only AES is supported.
- `type` (String) configuration for the metadata store to use, currently only ZDB is supported.

<a id="nestedblock--qsfs--metadata--backends"></a>
### Nested Schema for `qsfs.metadata.backends`

Required:

- `address` (String) Address of backend ZDB (e.g. [300:a582:c60c:df75:f6da:8a92:d5ed:71ad]:9900 or 60.60.60.60:9900).
- `namespace` (String) ZDB namespace.
- `password` (String) Namespace password.




<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)


<a id="nestedblock--vms"></a>
### Nested Schema for `vms`

Required:

- `flist` (String) Flist used on this vm, e.g. https://hub.grid.tf/tf-official-apps/base:latest.flist. All flists could be found in `https://hub.grid.tf/`.
- `name` (String) Vm (zmachine) workload name. This has to be unique within the deployment. Must contain only lowercase alphanumeric.

Optional:

- `corex` (Boolean) Flag to enable corex. More information about corex could be found [here](https://github.com/threefoldtech/corex)
- `cpu` (Number) Number of virtual CPUs. Must be between 1 and 32.
- `description` (String) Description of the vm.
- `entrypoint` (String) Command to execute as the ZMachine init.
- `env_vars` (Map of String) Environment variables to pass to the zmachine.
- `flist_checksum` (String) if present, the flist is rejected if it has a different hash.
- `gpus` (List of String) List of the GPUs to be attached to the vm and must not be used by other vms
- `ip` (String) The private wireguard IP of the vm.
- `memory` (Number) Memory size in MB. Must be between 256MBs and 262144MBs (256GBs).
- `mounts` (Block List) List of vm (ZMachine) mounts. Can reference QSFSs and Disks. (see [below for nested schema](#nestedblock--vms--mounts))
- `planetary` (Boolean) Flag to enable Yggdrasil IP allocation.
- `publicip` (Boolean) Flag to enable public ipv4 reservation.
- `publicip6` (Boolean) Flag to enable public ipv6 reservation.
- `rootfs_size` (Number) Root file system size in MB. Must be between 1024MBs and 10485760MBs (10TBs).
- `zlogs` (List of String) List of Zlogs workloads configurations (URLs). Zlogs is a utility workload that allows you to stream `ZMachine` logs to a remote location.

Read-Only:

- `computedip` (String) The reserved public ipv4 if any.
- `computedip6` (String) The reserved public ipv6 if any.
- `console_url` (String) The url to access the vm via cloud console on private interface using wireguard.
- `ygg_ip` (String) The allocated Yggdrasil IP.

<a id="nestedblock--vms--mounts"></a>
### Nested Schema for `vms.mounts`

Required:

- `disk_name` (String) Name of QSFS or Disk to mount.
- `mount_point` (String) Directory to mount the disk on inside the ZMachine.



<a id="nestedblock--zdbs"></a>
### Nested Schema for `zdbs`

Required:

- `name` (String) ZDB worklod name. This has to be unique within the deployment. Must contain only lowercase alphanumeric.
- `password` (String) ZDB password.
- `size` (Number) Size of the ZDB in GBs.

Optional:

- `description` (String) ZDB workload description.
- `mode` (String) Mode of the ZDB, `user` or `seq`. `user` is the default mode where a user can SET their own keys, like any key-value store. All keys are kept in memory. in `seq` mode, keys are sequential and autoincremented.
- `public` (Boolean) Makes it read-only if password is set, writable if no password set.

Read-Only:

- `ips` (List of String) Computed IPs of the ZDB. Two IPs are returned: a public IPv6, and a YggIP, in this order
- `namespace` (String) Namespace of the ZDB.
- `port` (Number) Port of the ZDB.
